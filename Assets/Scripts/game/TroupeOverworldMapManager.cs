using System.Collections;
using System.Collections.Generic;
using ThugLib;
using ThugSimpleGame;

namespace ThugSimpleGame {
    public class TroupeOverworldMapManager : MapManager {

        private LevelManagerScript lm;

        public TroupeOverworldMapManager(LevelManagerScript l) {
            lm = l;
            Bounds = new MapRectangle(0, 0, lm.levelWidth, lm.levelHeight);
        }
        public override void Generate()
        {
            int[,] prefabOutdoor = new int[,] {
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,3,3,3,3,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,2,1,1,1,1,1,1,1,1,1,1,0,3,3,3,3,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,3,3,3,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,4,4,0,0,0,0,0,0,0,1,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,4,4,4,4,4,4,4,4,4,0,0,1,0,3,3,3,0,0,1,1,1,1,1,1,1,1,2,0,0,0,0,4,0,0,0,0,0},
                {0,0,0,0,0,4,4,4,4,4,4,4,0,0,1,0,3,3,3,0,0,1,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0},
                {0,0,0,0,0,0,4,4,4,4,4,4,0,0,1,0,3,3,3,0,0,1,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,0,0},
                {0,0,0,0,0,0,0,4,4,4,4,4,0,0,1,0,3,3,3,0,0,1,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,3,3,3,0,0,1,0,4,4,4,4,4,0,0,0,0,4,4,4,4,4,4,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,3,3,0,0,0,1,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0},
                {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,3,3,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,0},
                {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,3,3,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,4,4,3,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,1,0,0,0,0,4,4,4,4,4,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,1,0,0,0,4,4,0,4,4,4,0,0,1,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0},
                {0,0,0,0,0,0,0,1,1,1,1,2,1,1,1,1,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,3,3,3,3,3,3,3,0,3,3,0,0,0,0,3,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,0,0,1,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,0,0,0,0,0,0,3,3,3,3,0,0,0,2,0,0,0,0,0,0},
                {0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,0,0,0,0,0,0,0,3,3,4,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,0,0,0,0,0,0,0,4,4,4,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,0,0,0,0,0,0,0,4,4,0,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,1,1,1,1,1,0,0,4,4,0,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,1,0,0,0,4,0,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
            };
            for (int x = 0; x < 40; x++)
            {
                for (int y = 0; y < 40; y++)
                {
                    CellEntity       cell = lm.entity.GetCell(x,y);
                    TerrainEntity terrain = new TerrainEntity();
                    terrain.index         = lm.gm.entity.RegisterEntity(terrain);
                    terrain.SetCell(cell);
                    switch (prefabOutdoor[lm.levelHeight - y - 1,x])
                    {
                        case 0:
                            terrain.hindrance        = 0f;
                            terrain.opacity          = 0f;
                            terrain.shortDescription = "grass";
                            terrain.longDescription  = "Grass";
                            break;
                        case 1:
                            terrain.hindrance        = 0f;
                            terrain.opacity          = 0f;
                            terrain.shortDescription = "road";
                            terrain.longDescription  = "A crumbling but still-functional stretch of road";
                            break;
                        case 2:
                            terrain.hindrance        = 0f;
                            terrain.opacity          = 0f;
                            terrain.shortDescription = "city";
                            terrain.longDescription  = "A walled city";
                            break;
                        case 3:
                            terrain.hindrance        = 1f;
                            terrain.opacity          = 0f;
                            terrain.shortDescription = "water";
                            terrain.longDescription  = "A large impassible body of water";
                            break;
                        case 4:
                            terrain.hindrance        = 1f;
                            terrain.opacity          = 1f;
                            terrain.shortDescription = "trees";
                            terrain.longDescription  = "Dense woodlands";
                            break;
                    }
                }
            }
        }
        public override void PostProcess()
        {
            // TODO
        }

        public override CellEntity[][] GetPatch(MapRectangle region) {
            return null;
            /*
            MapSpaceType[][] patch = new MapSpaceType[region.w][];
            for (int i = 0; i < region.w; i++) {
                patch[i] = new MapSpaceType[region.h];
                for (int j = 0; j < region.h; j++) {
                    patch[i][j] = this.palette[this.grid[i][j]];
                }
            }
            return patch;
            */
        }
    }
}
